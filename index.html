<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ Ø§Ù„Ø°ÙƒÙŠ Ø§Ù„Ù…Ø¯Ø¹ÙˆÙ… Ø¨Ù€ Gemini AI Ù„Ø·Ù„Ø§Ø¨ Ø§Ù„ØªÙ…Ø±ÙŠØ¶.">
    <meta name="author" content="MeDoAnDrOiD">
    <title> Ù…Ø³Ø§Ø¹Ø¯ ØªÙ…Ø±ÙŠØ¶| MeDoAnDrOiD</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-grad-1-light: #6a82fb;
            --bg-grad-2-light: #fc5c7d;
            --bg-grad-3-light: #50e3c2;
            --text-color-light: #1f2937;
            --card-bg-light: rgba(255, 255, 255, 0.55);
            --shadow-light: 0 8px 32px 0 rgba(31, 38, 135, 0.2);
            --accent-light: #5865f2;

            --bg-grad-1-dark: #1d2b64;
            --bg-grad-2-dark: #3a1c71;
            --bg-grad-3-dark: #fdbb2d;
            --text-color-dark: #e5e7eb;
            --card-bg-dark: rgba(29, 35, 42, 0.6);
            --shadow-dark: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
            --accent-dark: #82aaff;

            --font-family: 'Poppins', sans-serif;
            --border-radius: 18px;
            --transition-speed: 0.4s;
        }

        *, *::before, *::after {
            box-sizing: border-box;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: var(--font-family);
            margin: 0;
            padding: 2rem 1rem;
            min-height: 100vh;
            color: var(--text-color-light);
            background: linear-gradient(-45deg, var(--bg-grad-1-light), var(--bg-grad-2-light), var(--bg-grad-3-light));
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            transition: color var(--transition-speed);
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        body.dark-mode {
            color: var(--text-color-dark);
            background: linear-gradient(-45deg, var(--bg-grad-1-dark), var(--bg-grad-2-dark), var(--bg-grad-3-dark));
            background-size: 400% 400%;
            animation: gradientBG 20s ease infinite;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 2.5rem;
            animation: fadeIn 1s ease-in-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 12px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .theme-switcher {
            background-color: var(--card-bg-light);
            border: none;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-light);
            transition: transform var(--transition-speed), background-color var(--transition-speed);
        }

        body.dark-mode .theme-switcher {
            background-color: var(--card-bg-dark);
            box-shadow: var(--shadow-dark);
        }

        .theme-switcher svg {
            width: 24px;
            height: 24px;
            color: var(--text-color-light);
        }

        body.dark-mode .theme-switcher svg {
            color: var(--text-color-dark);
        }
        
        .theme-switcher:hover {
            transform: scale(1.1) rotate(20deg);
        }

        .main-card {
            background: var(--card-bg-light);
            border-radius: var(--border-radius);
            padding: 2.5rem;
            box-shadow: var(--shadow-light);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            transition: all var(--transition-speed);
        }

        body.dark-mode .main-card {
            background: var(--card-bg-dark);
            box-shadow: var(--shadow-dark);
            border-color: rgba(255, 255, 255, 0.1);
        }

        .main-card h1 {
            text-align: center;
            margin-top: 0;
            font-size: 2.2rem;
            color: var(--text-color-light);
            font-weight: 700;
        }
        
        body.dark-mode .main-card h1 {
             color: var(--text-color-dark);
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            align-items: center;
            margin-top: 2rem;
        }

        #userInput {
            width: 100%;
            padding: 15px 20px;
            font-family: var(--font-family);
            font-size: 1.1rem;
            border-radius: 12px;
            border: 1px solid transparent;
            background-color: rgba(255,255,255,0.7);
            transition: all var(--transition-speed);
            resize: vertical;
            min-height: 100px;
            color: var(--text-color-light);
        }

        body.dark-mode #userInput {
            background-color: rgba(0,0,0,0.3);
            border-color: rgba(255,255,255,0.1);
            color: var(--text-color-dark);
        }

        #userInput::placeholder { color: #6b7280; }
        body.dark-mode #userInput::placeholder { color: #9ca3af; }

        #userInput:focus {
            outline: none;
            border-color: var(--accent-light);
            box-shadow: 0 0 0 4px rgba(88, 101, 242, 0.3);
        }

        body.dark-mode #userInput:focus {
            border-color: var(--accent-dark);
            box-shadow: 0 0 0 4px rgba(130, 170, 255, 0.3);
        }

        #submitBtn {
            padding: 14px 35px;
            font-size: 1.15rem;
            font-weight: 600;
            border: none;
            border-radius: 50px;
            background: var(--accent-light);
            color: white;
            cursor: pointer;
            box-shadow: 0 6px 20px rgba(88, 101, 242, 0.3);
            transition: all var(--transition-speed) ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        body.dark-mode #submitBtn {
            background: var(--accent-dark);
            box-shadow: 0 6px 20px rgba(130, 170, 255, 0.2);
            color: #111827;
        }

        #submitBtn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        #submitBtn:not(:disabled):hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 25px rgba(88, 101, 242, 0.4);
        }
        
        body.dark-mode #submitBtn:not(:disabled):hover {
            box-shadow: 0 10px 25px rgba(130, 170, 255, 0.3);
        }
        
        #submitBtn:active {
            transform: translateY(-1px) scale(0.98);
        }
        
        .loader {
            width: 20px;
            height: 20px;
            border: 3px solid;
            border-color: #fff transparent;
            border-radius: 50%;
            animation: rotation 0.8s linear infinite;
        }
        body.dark-mode .loader { border-color: #111827 transparent; }

        @keyframes rotation {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        #results {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .result-placeholder {
            text-align: center;
            padding: 3rem 1rem;
            opacity: 0.8;
        }

        .result-card {
            background: var(--card-bg-light);
            border-radius: var(--border-radius);
            padding: 1.5rem 2rem;
            box-shadow: var(--shadow-light);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            animation: resultFadeIn 0.6s ease-out forwards;
        }
        
        @keyframes resultFadeIn {
            from { opacity: 0; transform: translateY(30px) scale(0.98); }
            to { opacity: 1; transform: translateY(0) scale(1); }
        }

        body.dark-mode .result-card {
            background: var(--card-bg-dark);
            box-shadow: var(--shadow-dark);
            border-color: rgba(255, 255, 255, 0.1);
        }
        
        .result-card h3 {
            margin-top: 0;
            color: var(--accent-light);
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.4rem;
        }
        
        body.dark-mode .result-card h3 { color: var(--accent-dark); }
        .result-card h4 {
            margin-top: 1.5rem;
            margin-bottom: 0.8rem;
            border-bottom: 2px solid;
            border-image: linear-gradient(to right, var(--accent-light), transparent) 1;
            padding-bottom: 8px;
            font-size: 1.2rem;
        }
        body.dark-mode .result-card h4 {
            border-image: linear-gradient(to right, var(--accent-dark), transparent) 1;
        }
        .result-card p, .result-card li { line-height: 1.9; }
        .result-card hr { border: none; border-top: 1px solid rgba(0,0,0,0.1); margin: 1.5rem 0; }
        body.dark-mode .result-card hr { border-top-color: rgba(255,255,255,0.1); }
        .result-card ul { padding-right: 25px; }
        .result-card .table-container { overflow-x: auto; margin-top: 1rem; border-radius: 10px; }
        .result-card table {
            width: 100%;
            border-collapse: collapse;
            text-align: right;
        }

        .result-card th, .result-card td {
            padding: 14px;
            border: 1px solid rgba(0,0,0,0.08);
        }
        body.dark-mode .result-card th, body.dark-mode .result-card td { border-color: rgba(255,255,255,0.1); }
        .result-card th {
            background-color: rgba(88, 101, 242, 0.1);
            font-weight: 600;
        }
        body.dark-mode .result-card th { background-color: rgba(130, 170, 255, 0.1); }
        .result-card tbody tr:nth-child(even) { background-color: rgba(0,0,0,0.02); }
        body.dark-mode .result-card tbody tr:nth-child(even) { background-color: rgba(255,255,255,0.03); }

        .footer { text-align: center; margin-top: 2rem; padding: 1rem; opacity: 0.8; font-size: 0.9rem; }
        .footer p { margin-bottom: 0.5rem; }

        .toast-container { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); z-index: 1000; }
        .toast {
            padding: 12px 22px;
            border-radius: 12px;
            color: #fff;
            box-shadow: 0 5px 20px rgba(0,0,0,0.25);
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 500;
            backdrop-filter: blur(10px);
            animation: slideUp 0.4s ease-out, fadeOutToast 0.5s ease-in 3.5s forwards;
        }
        .toast.success { background-color: rgba(34, 197, 94, 0.8); }
        .toast.error { background-color: rgba(239, 68, 68, 0.8); }
        @keyframes slideUp { from { transform: translateY(30px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes fadeOutToast { from { opacity: 1; } to { opacity: 0; } }
        
        @media (max-width: 768px) {
            body { padding: 1rem; }
            .main-card { padding: 1.5rem; }
            .main-card h1 { font-size: 1.8rem; }
            .logo { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <div class="container">
        <header class="header">
            <div class="logo">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2L12 22"></path><path d="M18 6L6 18"></path><path d="M6 6L18 18"></path></svg>
                <span>Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ¶</span>
            </div>
            <button class="theme-switcher" id="themeSwitcher" aria-label="Toggle dark mode">
                <svg id="theme-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg>
            </button>
        </header>

        <main class="main-card">
            <h1>Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ØªÙ…Ø±ÙŠØ¶ Ø§Ù„Ø°ÙƒÙŠ</h1>
            <p style="text-align: center; opacity: 0.9; line-height: 1.7;">Ø§ÙƒØªØ¨ Ø£ÙŠ Ù…ØµØ·Ù„Ø­ Ø·Ø¨ÙŠØŒ Ø­Ø§Ù„Ø© Ù…Ø±Ø¶ÙŠØ©ØŒ Ø£Ùˆ Ù…Ø§Ø¯Ø© Ø¯Ø±Ø§Ø³ÙŠØ© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø´Ø±Ø­ ØªÙØµÙŠÙ„ÙŠ ÙˆØ®Ø·Ø© Ø±Ø¹Ø§ÙŠØ© Ø¹Ù…Ù„ÙŠØ© Ù…Ø¯Ø¹ÙˆÙ…Ø© Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ.</p>
            <div class="input-group">
                <textarea id="userInput" placeholder="Ù…Ø«Ø§Ù„: Nursing care plan for diabetes mellitus" rows="4" aria-label="User Input"></textarea>
                <button id="submitBtn">
                    <span id="btn-text">ØªØ­Ù„ÙŠÙ„</span>
                   <svg id="btn-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><circle cx="11.5" cy="14.5" r="2.5"/><path d="m13.25 16.25-1.5-1.5"/></svg>

                </button>
            </div>
        </main>

        <section id="results">
             <div class="result-placeholder">
               <!-- <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" style="opacity:0.5"><path d="M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-3.5-6C12.5 2 11 1 9.5 1S7 2.5 7 5c0 2-1.5 4.5-3.5 6S2 13 2 15a7 7 0 0 0 7 7"/><path d="M14.5 10.5c-1 0-2.5 1-2.5 3V22"/><path d="M9 12H5"/><path d="M19 12h-4"/></svg>
               -->
                <p>Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ§Ù„Ù…Ù†Ø¸Ù…Ø© Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§...</p>
            </div>
        </section>

        <footer class="footer">
            <p>Ø§Ù„Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù…ÙÙ†Ø´Ø£ Ø¨ÙˆØ§Ø³Ø·Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ù‚Ø¯ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª ØºÙŠØ± Ø¯Ù‚ÙŠÙ‚Ø©. ØªØ­Ù‚Ù‚ Ø¯Ø§Ø¦Ù…Ù‹Ø§ Ù…Ù† Ø§Ù„Ù…ØµØ§Ø¯Ø± Ø§Ù„Ù…ÙˆØ«ÙˆÙ‚Ø©.</p>
            <p>&copy; 2025 MeDoAnDrOiD. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø©.</p>
        </footer>
    </div>
    <div id="toastContainer" class="toast-container"></div>

    <script>
        const themeSwitcher = document.getElementById('themeSwitcher');
        const themeIcon = document.getElementById('theme-icon');
        const body = document.body;
        const userInput = document.getElementById('userInput');
        const submitBtn = document.getElementById('submitBtn');
        const resultsContainer = document.getElementById('results');
        const toastContainer = document.getElementById('toastContainer');
        
        const sunIcon = `<path d="M12 1v2m-5.66 1.34l-1.42 1.42M1 12h2m1.34 5.66l1.42 1.42M12 21v2m5.66-1.34l1.42-1.42M23 12h-2m-1.34-5.66l-1.42-1.42"/><circle cx="12" cy="12" r="5"/>`;
        const moonIcon = `<path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>`;
        
        const GEMINI_API_KEY = "AIzaSyBa-pKQEVcGm2ABmScK6625fEuJt3X0xbE";

        const systemPrompt = `
You are "Nursing AI Assistant ," the most advanced, highly intelligent, and professional nursing AI tutor designed exclusively for Egyptian nursing students. You deliver expert-level guidance in fluent, clear Egyptian Arabic, with a natural, neutral tone appropriate for all nursing students (no gender specification, just â€œØ§Ù„Ù…Ù…Ø±Ø¶â€) ensuring professionalism and inclusivity in every response.

1. ADVANCED CONTEXTUAL & INTENTUAL UNDERSTANDING  
   - Analyze user input with maximum intelligence to discern intent, complexity, and knowledge level.  
   - Dynamically adjust depth from brief clarifications to comprehensive lectures or nursing care plans based on user cues or explicit requests ("Ø§Ø´Ø±Ø­ Ù„ÙŠ Ø¨Ø§Ù„ØªÙØµÙŠÙ„").

2. TEXTUAL STYLE & TONE  
   - Use neutral, professional language addressing the user as â€œØ§Ù„Ù…Ù…Ø±Ø¶â€ without any gender-specific references.  
   - Speak clearly, authoritatively, and warmly, similar to a senior nursing mentor, maintaining a respectful, encouraging tone.

3. PURELY PROFESSIONAL HTML FORMATTED OUTPUT  
   - All responses must be structured in responsive, semantic HTML with an elegant dark glassmorphic background and crisp white text (#fff) for ultimate readability.  
   - Design must smoothly adapt across mobiles, tablets, laptops, and desktops with proper spacing and font choices ('Cairo' recommended).  
   
   a. Medical Term:  
   \`\`\`html
   <div class="result-card term" style="color:#fff; font-family: 'Cairo', sans-serif; line-height:1.75;">
     <h3>ğŸ©º Ø§Ù„Ù…ØµØ·Ù„Ø­ Ø§Ù„Ø·Ø¨ÙŠ: <strong>[English Term]</strong></h3>
     <p><strong>Ø§Ù„Ù†Ø·Ù‚ Ø¨Ø§Ù„Ù…ØµØ±ÙŠ:</strong> <span class="pronounce">[Phonetic Egyptian Arabic]</span></p>
     <p><strong>Ø´Ø±Ø­ ÙˆØ§Ø¶Ø­ ÙˆÙ…Ø¨Ø§Ø´Ø±:</strong> [Explanation in fluent, neutral Egyptian Arabic]</p>
     <hr>
     <h4>Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø±Ø³Ù…ÙŠ (Official Definition):</h4>
     <p style="font-style: italic; color:#ccc;">[Accurate English formal definition]</p>
   </div>
   \`\`\`

   b. Nursing Care Plan / Case:  
   \`\`\`html
   <div class="result-card care-plan" style="color:#fff; font-family: 'Cairo', sans-serif;">
     <h3>ğŸ›ï¸ Ø®Ø·Ø© Ø±Ø¹Ø§ÙŠØ© ØªÙ…Ø±ÙŠØ¶ÙŠØ© Ù„Ù€: <strong>[Case/Condition]</strong></h3>
     <p>[Ù…Ù‚Ø¯Ù…Ø© Ø´Ø±Ø­ Ù…Ø®ØªØµØ± ÙˆÙˆØ§Ø¶Ø­ Ø¨Ø§Ù„Ø­Ø¬Ù… Ø§Ù„Ù…Ù†Ø§Ø³Ø¨]</p>
     <div class="table-container" style="overflow-x:auto;">
       <table border="1" cellpadding="10" cellspacing="0" style="border-collapse: collapse; width:100%; text-align:center;">
         <thead>
           <tr style="background-color:#4a90e2; color:#fff;">
             <th>Ø§Ù„ØªØ¯Ø®Ù„ (Intervention)</th>
             <th>Ø§Ù„ØªÙƒØ±Ø§Ø± (Frequency)</th>
             <th>Ø§Ù„Ø£Ø¯ÙˆØ§Øª (Tools)</th>
             <th>Ù…Ù„Ø§Ø­Ø¸Ø§Øª (Notes)</th>
           </tr>
         </thead>
         <tbody>
           <tr>
             <td>[ØªÙØµÙŠÙ„ Ø§Ù„ØªØ¯Ø®Ù„]</td>
             <td>[Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚]</td>
             <td>[Ø§Ù„Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©]</td>
             <td>[Ù†ØµØ§Ø¦Ø­ ÙˆØªØ­Ø°ÙŠØ±Ø§Øª]</td>
           </tr>
         </tbody>
       </table>
     </div>
   </div>
   \`\`\`

   c. Subject / Section Explanation:  
   \`\`\`html
   <div class="result-card subject" style="color:#fff; font-family: 'Cairo', sans-serif;">
     <h3>ğŸ“š Ø¹Ù† Ù…Ø§Ø¯Ø©: <strong>[Subject Name]</strong></h3>
     <p><strong>Ø´Ø±Ø­ Ø´Ø§Ù…Ù„ ÙˆØ¨Ø³ÙŠØ·:</strong> [Ø´Ø±Ø­ Ù…ÙØµÙ„ Ø¨Ø§Ù„Ø¹Ø§Ù…ÙŠØ© Ø§Ù„Ù…ØµØ±ÙŠØ© Ø§Ù„Ù…Ù‡Ù†ÙŠØ©]</p>
     <hr>
     <h4>Ø§Ù„ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø±Ø³Ù…ÙŠ (Official Definition):</h4>
     <p style="font-style: italic; color:#ccc;">[English formal definition]</p>
     <h4>Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ© (Key Topics):</h4>
     <ul>
       <li>[Topic 1]</li>
       <li>[Topic 2]</li>
       <li>[Topic 3]</li>
     </ul>
   </div>
   \`\`\`

4. PHONETIC PROCESSING & PRONUNCIATION  
   - Translate all English and Latin medical terms to natural Egyptian Arabic phonetic pronunciation immediately after the term in parentheses.  
   - Example: Ù‚Ù„Ø¨ â€” "Ù‡Ø§Ø±Øª" (heart), ÙˆØ±ÙŠØ¯ â€” "ÙÙŠÙ†Ø²" (veins).  
   - Keep an evolving phonetic dictionary with fallback heuristics for new terms.

5. PERSONALIZED INTRODUCTION WHEN ASKED  
   - If user asks â€˜Ù…ÙŠÙ† Ø§Ù†ØªØŸâ€™ or â€˜Ù…Ù† Ø£Ù†ØªØŸâ€™ reply in natural, varied Egyptian Arabic:  
     â€œØ£Ù†Ø§ Ù…Ø­Ù…Ø¯ Ø£ÙŠÙ…Ù†ØŒ Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ ÙˆØ§Ù„Ù…Ø·ÙˆØ± Ø§Ù„Ø°ÙƒÙŠ Ù„Ù‡Ø°Ø§ Ø§Ù„Ù…Ø´Ø±ÙˆØ¹ØŒ Ø·Ø§Ù„Ø¨ ÙÙŠ Ù…Ø¹Ù‡Ø¯ ØªÙ…Ø±ÙŠØ¶ Ø§Ù„Ù…Ù†ØµÙˆØ±Ø©ØŒ Ø¨Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§ Ø¹Ø´Ø§Ù† Ø£Ø³Ù‡Ù„ Ø¹Ù„ÙŠÙƒ Ø§Ù„ØªØ¹Ù„Ù….â€  
   - Make responses fresh and slightly varied on repeated queries.

6. EDUCATIONAL BEST PRACTICES  
   - Use clear, stepwise logical flow for complex topics.  
   - Use relatable, practical examples where applicable.  
   - Suggest next steps or related topics automatically for continuous learning.  
   - Use emojis sparingly and meaningfully (ğŸ’¡ for tips, âš ï¸ for warnings).

7. DESIGN & ACCESSIBILITY  
   - Color scheme: white text (#fff) on dark bluish glass blur background with 18-20px backdrop blur for eye comfort.  
   - Responsive typography and spacing for mobile, tablet, laptop, desktop.

8. ACCURACY & ETHICS  
   - Always provide verified, clinically accurate, and up-to-date content.  
   - Highlight safety concerns, contraindications, and warnings clearly.

Apply these standards strictly on every user interaction to deliver the most powerful, intelligent, professional, and culturally relevant nursing education AI that speaks to all students neutrally and effectively in Egyptian Arabic.`;


        
        const setInitialTheme = () => {
            const savedTheme = localStorage.getItem('theme') || 'light';
            if (savedTheme === 'dark') {
                body.classList.add('dark-mode');
                themeIcon.innerHTML = sunIcon;
            } else {
                body.classList.remove('dark-mode');
                themeIcon.innerHTML = moonIcon;
            }
        };

        const toggleTheme = () => {
            body.classList.toggle('dark-mode');
            const isDarkMode = body.classList.contains('dark-mode');
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
            themeIcon.innerHTML = isDarkMode ? sunIcon : moonIcon;
        };

        const showToast = (message, type = 'success') => {
            const toast = document.createElement('div');
            toast.className = `toast ${type}`;
            toast.innerHTML = `<span>${type === 'success' ? 'âœ…' : 'âŒ'}</span><span>${message}</span>`;
            toastContainer.appendChild(toast);
            setTimeout(() => toast.remove(), 4000);
        };

        const setLoadingState = (isLoading) => {
            const btnText = document.getElementById('btn-text');
            const btnIcon = document.getElementById('btn-icon');
            submitBtn.disabled = isLoading;
            if (isLoading) {
                btnText.textContent = 'Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„';
                btnIcon.style.display = 'none';
                const loader = document.createElement('span');
                loader.className = 'loader';
                submitBtn.appendChild(loader);
            } else {
                btnText.textContent = 'ØªØ­Ù„ÙŠÙ„';
                btnIcon.style.display = 'inline-block';
                const loader = submitBtn.querySelector('.loader');
                if (loader) loader.remove();
            }
        };

        const handleFormSubmit = async () => {
            const query = userInput.value.trim();

            if (GEMINI_API_KEY === "Ø¶Ø¹ Ù…ÙØªØ§Ø­ Gemini API Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù‡Ù†Ø§") {
                showToast('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¶Ø§ÙØ© Ù…ÙØªØ§Ø­ Gemini API Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ Ø£ÙˆÙ„Ø§Ù‹.', 'error');
                return;
            }
            if (!query) {
                showToast('Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ø³ØªÙØ³Ø§Ø±Ùƒ Ø§Ù„Ø·Ø¨ÙŠ.', 'error');
                return;
            }
            
            setLoadingState(true);
            resultsContainer.innerHTML = `<div class="result-placeholder"><p>ÙŠØªÙ… Ø§Ù„Ø¢Ù† Ø§Ø³ØªØ´Ø§Ø±Ø© Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø§Ù„Ø·Ø¨ÙŠ...</p></div>`;

            try {
                const API_URL = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${GEMINI_API_KEY}`;
                
                const response = await fetch(API_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: systemPrompt + "\n\nUser input: " + query }] }]
                    })
                });

                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.error?.message || `HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                
                if (data.candidates && data.candidates.length > 0 && data.candidates[0].content.parts.length > 0) {
                    let resultText = data.candidates[0].content.parts[0].text;
                    resultText = resultText.replace(/```html/g, '').replace(/```/g, '');
                    resultsContainer.innerHTML = resultText;
                    showToast('ØªÙ… Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
                } else {
                    throw new Error('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù…Ø­ØªÙˆÙ‰ ÙÙŠ Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ø§Ù„Ù€ AI.');
                }
            } catch (error) {
                resultsContainer.innerHTML = `<div class="result-card error-card"><h3>âŒ Ø­Ø¯Ø« Ø®Ø·Ø£</h3><p>Ù‚Ø¯ ÙŠÙƒÙˆÙ† Ù…ÙØªØ§Ø­ API ØºÙŠØ± ØµØ§Ù„Ø­ Ø£Ùˆ Ù‡Ù†Ø§Ùƒ Ù…Ø´ÙƒÙ„Ø© ÙÙŠ Ø§Ù„Ø´Ø¨ÙƒØ©. ÙŠØ±Ø¬Ù‰ Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„ÙƒÙˆØ¯ ÙˆØ§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</p><p><strong>ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ø®Ø·Ø£:</strong> ${error.message}</p></div>`;
                showToast('ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.', 'error');
            } finally {
                setLoadingState(false);
            }
        };

        themeSwitcher.addEventListener('click', toggleTheme);
        submitBtn.addEventListener('click', handleFormSubmit);
        document.addEventListener('DOMContentLoaded', setInitialTheme);
        userInput.addEventListener('keydown', (event) => {
            if (event.key === 'Enter' && !event.shiftKey) {
                event.preventDefault();
                handleFormSubmit();
            }
        });

    </script>
</body>
</html>
